CC=/usr/bin/cc
CXX=/usr/bin/c++
NVCC=/opt/cuda/bin/nvcc
MAKE=/usr/bin/make
INC=-I/usa/dchapp/fenzi/FENZI/branch/dchapp-reproducible/build

DEFS=-DNDEBUG
CFLAGS=-O2

SRCDIR="/usa/dchapp/fenzi/FENZI/branch/dchapp-reproducible/src"
BINDIR="/usa/dchapp/fenzi/FENZI/branch/dchapp-reproducible/build"
CWD=$(shell pwd)

VERSION=2_00
ARCH=sm_20

TARGET=/usa/dchapp/fenzi/FENZI/branch/dchapp-reproducible/build/fenzi_2_00

all: fenzi

fenzi: ${TARGET}
	ln -s ${TARGET} ${BINDIR}/fenzi

${TARGET}: *.c *.h *.cu
	${NVCC} ${CFLAGS} ${DEFS} ${INC} -use_fast_math --ptxas-options="-v -O3" \
	        -arch ${ARCH} -lcufft -o ${TARGET} io/*.c fenzi.cu

clean:
	rm -f *~ ${TARGET} ${BINDIR}/trj2xyz virial* *.out

include /usa/dchapp/fenzi/FENZI/branch/dchapp-reproducible/build/Makefile.install

# depracated
# trj2xyz: trj2xyz.c
	# ${CC} -o ${BINDIR}/trj2xyz.exe trj2xyz.c

